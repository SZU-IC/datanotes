hive.exec.engine=saprk;
mapreduce.job.reduces=-1;
hive.exec.reducers.max=1009;
hive.exec.bytes.per.reducers=256M;

hive.auto.convert.join=true;
hive.mapjoin.smalltable.filesize=25000000;




项目：
一、招证企业画像
	1、数据建模：主要是根据需求，进行数据调研，然后使用edmzl数据库建模工具去构建表关联的关系。
		ER模型：出发点是整合数据，按照主题进行相似性组合和合并，并进行一致性处理，不能直接用于分析决策。
		维度模型：更关注如何快速地完成需求分析，同时具有大规模复杂查询地响应性能。
			选择业务 -- 确认粒度 -- 选择维度 -- 确认事实（需要分析的指标） 
		
		公司数据：有按照主题、数据域等维度划分的数据，还有一些满足报表的需求为目的的数据。
			市场主体：基本信息、司法诉讼、企业（中国境内）、企业（香港）、私募管理人、证券公司、期货公司、保险公司、银行、信托公司、政府投资平台、
					  政府、高管、财务、中介机构
			市场媒介：私募基金、券商资管计划、券商直投基金、基金专户、公募基金
			市场事件：资讯、经营、舆情、评级、行政监管、政策法规、个人
			其他：常量（行业、地理位置、行政区划分）
		
		数据分层：项目应用库：ods（） --》 agg（dwd、dws） --》 kbs
			agg是公用层
		
		三范式：
			属性不可分割
			不存在部分函数依赖
				表中任意一个主键或任意一组联合主键，可以确定除该主键外的所有的非主键值。
				保证一张表只能描述一件事情，比如一个主键可以确定，姓名和年龄，不能同时确定班级和得分。
				不满足造成的问题：
					数据冗余、更新不方便
			不存在依赖传递
				在任一主键都可以确定所有非主键字段值的情况下，不能存在某非主键字段 A 可以获取 某非主键字段 B。
		
		上线流程：
			书写上线文档（代码提交，代码评审） --》 提交到内部代码仓库 
	
	2、ElasticSearch
		分片：10个（分片数是机器数的1-3倍），6台机器
		refresh_interval:600s
		2个副本
		max_result_window=100000
		ik分词器
		max_ngrm = 4
		min_ngrm = 2
		diff_ngrm = 2
		nested嵌套数据类型，json格式
	
	3、Nebula图库 （Docker Swarm部署）
		测试 3台 数据量（一个space 点：3亿，边2亿）
		生产 6台 数据量同上

		图库数据导入，参与图库升级，图库运维（同事离职）
	
	4、股权穿透数据导出功能
		bfs广度遍历查询股权穿透数据（了解一下bfs原理）
		Docker部署，将查询文件上传到百度云盘，提供下载。
		问题：环路问题（循环执行，一直没有退出，时间较久）

	5、控制人计算Python代码（使用合合数据进行递归拼接）
		



	

		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		